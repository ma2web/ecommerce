(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[9],{530:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var a="http://45.92.95.60:7070",c={"x-auth-token":localStorage.token,"Content-Type":"application/json"}},636:function(e,t){},708:function(e,t,n){"use strict";n.r(t);var a=n(533),c=n.n(a),r=n(534),l=n(154),o=n(54),i=n(525),s=n(700),d=n(529),u=n(526),j=n(532),h=n.n(j),b=n(626),p=n.n(b),x=n(1),m=n(24),v=n(155),O=n(530),f=n(22);t.default=function(){var e=Object(x.useState)({email:"",password:""}),t=Object(i.a)(e,2),n=t[0],a=t[1],j=Object(x.useState)(null),b=Object(i.a)(j,2),g=b[0],w=b[1],y=(Object(m.useHistory)().push,function(e){return a(Object(o.a)(Object(o.a)({},n),{},Object(l.a)({},e.target.name,e.target.value)))}),k=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,r,l,o,i,s,d,u,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,h.a.post("".concat(O.a,"/api/user/login"),n);case 4:200===(null===(a=e.sent)||void 0===a?void 0:a.status)&&(i=null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.token,s=null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l._id,d=null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.role,localStorage.token=i,localStorage.userId=s,localStorage.role=d,setTimeout((function(){window.location.href="/"}),1e3)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),w(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(j=u.data)||void 0===j?void 0:j.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.useEffect)((function(){var e=p.a.parse(p.a.parse(window.location,{ignoreQueryPrefix:!0}).origin+p.a.parse(window.location,{ignoreQueryPrefix:!0}).hash.replace("#",""),{ignoreQueryPrefix:!0});(null===e||void 0===e?void 0:e["http://localhost:3001/login?token"])&&(localStorage.token=null===e||void 0===e?void 0:e["http://localhost:3001/login?token"],localStorage.userId=null===e||void 0===e?void 0:e.userId,localStorage.role=null===e||void 0===e?void 0:e.role,setTimeout((function(){window.location.href="/"}),500))}),[]),Object(f.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:Object(f.jsx)(u.m,{children:Object(f.jsx)(u.U,{className:"justify-content-center",children:Object(f.jsx)(u.l,{md:8,children:Object(f.jsxs)(u.j,{children:[Object(f.jsxs)(u.h,{className:"p-4",children:[Object(f.jsx)(u.i,{children:Object(f.jsxs)(u.u,{children:[Object(f.jsx)("h1",{children:"\u0648\u0631\u0648\u062f"}),Object(f.jsx)("p",{className:"text-medium-emphasis",children:"\u0628\u0647 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f"}),Object(f.jsxs)(u.G,{className:"mb-3",children:[Object(f.jsx)(u.H,{children:"@"}),Object(f.jsx)(u.w,{placeholder:"\u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc",autoComplete:"email",name:"email",value:n.email,onChange:y})]}),Object(f.jsxs)(u.G,{className:"mb-4",children:[Object(f.jsx)(u.H,{children:Object(f.jsx)(d.a,{icon:s.a})}),Object(f.jsx)(u.w,{type:"password",placeholder:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631",autoComplete:"current-password",name:"password",value:n.password,onChange:y})]}),Object(f.jsx)(u.U,{children:Object(f.jsx)(u.l,{xs:6,children:Object(f.jsx)(u.f,{color:"primary",className:"px-4",onClick:k,children:"\u0648\u0631\u0648\u062f"})})})]})}),g&&Object(f.jsx)(u.a,{color:"danger",children:g})]}),Object(f.jsx)(u.h,{className:"text-white bg-primary py-5",style:{width:"44%"},children:Object(f.jsx)(u.i,{className:"text-center",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"\u062b\u0628\u062a \u0646\u0627\u0645"}),Object(f.jsx)("p",{children:"\u0627\u06af\u0631 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u0646\u062f\u0627\u0631\u06cc\u062f \u0628\u0631\u0648\u06cc \u0644\u06cc\u0646\u06a9 \u0632\u06cc\u0631 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f \u0648 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0627\u06cc\u062c\u0627\u062f \u06a9\u0646\u06cc\u062f"}),Object(f.jsx)(v.b,{to:"/register",children:Object(f.jsx)(u.f,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"\u0639\u0636\u0648\u06cc\u062a"})})]})})})]})})})})})}}}]);
//# sourceMappingURL=9.aa5219e7.chunk.js.map
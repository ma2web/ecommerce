{"version":3,"sources":["views/api.js","views/pages/login/Login.js"],"names":["api","headers","localStorage","token","Login","useState","email","password","loginData","setLoginData","error","setError","push","useHistory","handleChange","e","target","name","value","handleSumbit","a","preventDefault","axios","post","response","status","data","id","_id","role","userId","setTimeout","message","className","md","placeholder","autoComplete","onChange","icon","cilLockLocked","type","xs","color","onClick","style","width","to","active","tabIndex"],"mappings":"6KAAA,oEAAO,IAAMA,EAAM,wBAENC,EAAU,CACrB,eAAgBC,aAAaC,MAC7B,eAAgB,qB,uLCwIHC,UAtHD,WACZ,MAAkCC,mBAAS,CACzCC,MAAO,GACPC,SAAU,KAFZ,mBAAOC,EAAP,KAAkBC,EAAlB,KAIA,EAA0BJ,mBAAS,MAAnC,mBAAOK,EAAP,KAAcC,EAAd,KAEQC,EAASC,uBAATD,KAEFE,EAAe,SAACC,GAAD,OACnBN,EAAa,2BAAKD,GAAN,kBAAkBO,EAAEC,OAAOC,KAAOF,EAAEC,OAAOE,UAEnDC,EAAY,uCAAG,WAAOJ,GAAP,+BAAAK,EAAA,6DACnBL,EAAEM,iBADiB,kBAGMC,IAAMC,KAAN,UAAcvB,IAAd,mBAAoCQ,GAH1C,OAKQ,OAAb,QAFNgB,EAHW,cAKL,IAARA,OAAA,EAAAA,EAAUC,UACNtB,EADsB,OACdqB,QADc,IACdA,GADc,UACdA,EAAUE,YADI,aACd,EAAgBvB,MACxBwB,EAFsB,OAEjBH,QAFiB,IAEjBA,GAFiB,UAEjBA,EAAUE,YAFO,aAEjB,EAAgBE,IACrBC,EAHsB,OAGfL,QAHe,IAGfA,GAHe,UAGfA,EAAUE,YAHK,aAGf,EAAgBG,KAC7B3B,aAAaC,MAAQA,EACrBD,aAAa4B,OAASH,EACtBzB,aAAa2B,KAAOA,EACpBE,YAAW,kBAAMnB,EAAK,iBAZP,gDAejBD,EAAQ,OAAC,EAAD,6BAAC,KAAOa,gBAAR,iBAAC,EAAiBE,YAAlB,aAAC,EAAuBM,SAff,yDAAH,sDAkBlB,OACE,qBAAKC,UAAU,yDAAf,SACE,cAAC,IAAD,UACE,cAAC,KAAD,CAAMA,UAAU,yBAAhB,SACE,cAAC,IAAD,CAAMC,GAAI,EAAV,SACE,eAAC,IAAD,WACE,eAAC,IAAD,CAAOD,UAAU,MAAjB,UACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,0DACA,mBAAGA,UAAU,uBAAb,6JAGA,eAAC,KAAD,CAAaA,UAAU,OAAvB,UACE,cAAC,KAAD,gBACA,cAAC,IAAD,CACEE,YAAY,gEACZC,aAAa,QACbnB,KAAK,QACLC,MAAOV,EAAUF,MACjB+B,SAAUvB,OAGd,eAAC,KAAD,CAAamB,UAAU,OAAvB,UACE,cAAC,KAAD,UACE,cAAC,IAAD,CAAOK,KAAMC,QAEf,cAAC,IAAD,CACEC,KAAK,WACLL,YAAY,8CACZC,aAAa,mBACbnB,KAAK,WACLC,MAAOV,EAAUD,SACjB8B,SAAUvB,OAGd,cAAC,KAAD,UACE,cAAC,IAAD,CAAM2B,GAAI,EAAV,SACE,cAAC,IAAD,CACEC,MAAM,UACNT,UAAU,OACVU,QAASxB,EAHX,+CAgBPT,GAAS,cAAC,IAAD,CAAQgC,MAAM,SAAd,SAAwBhC,OAEpC,cAAC,IAAD,CACEuB,UAAU,6BACVW,MAAO,CAAEC,MAAO,OAFlB,SAIE,cAAC,IAAD,CAAWZ,UAAU,cAArB,SACE,gCACE,uEACA,0aAIA,cAAC,IAAD,CAAMa,GAAG,YAAT,SACE,cAAC,IAAD,CACEJ,MAAM,UACNT,UAAU,OACVc,QAAM,EACNC,UAAW,EAJb","file":"static/js/13.14462f31.chunk.js","sourcesContent":["export const api = \"http://localhost:7070\";\n\nexport const headers = {\n  \"x-auth-token\": localStorage.token,\n  \"Content-Type\": \"application/json\",\n};\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  CAlert,\n  CButton,\n  CCard,\n  CCardBody,\n  CCardGroup,\n  CCol,\n  CContainer,\n  CForm,\n  CFormInput,\n  CInputGroup,\n  CInputGroupText,\n  CRow,\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\nimport { cilLockLocked } from \"@coreui/icons\";\nimport axios from \"axios\";\nimport { api } from \"src/views/api\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Login = () => {\n  const [loginData, setLoginData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [error, setError] = useState(null);\n\n  const { push } = useHistory();\n\n  const handleChange = (e) =>\n    setLoginData({ ...loginData, [e.target.name]: e.target.value });\n\n  const handleSumbit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(`${api}/api/user/login`, loginData);\n\n      if (response?.status === 200) {\n        const token = response?.data?.token;\n        const id = response?.data?._id;\n        const role = response?.data?.role;\n        localStorage.token = token;\n        localStorage.userId = id;\n        localStorage.role = role;\n        setTimeout(() => push(\"/products\"));\n      }\n    } catch (error) {\n      setError(error?.response?.data?.message);\n    }\n  };\n  return (\n    <div className=\"bg-light min-vh-100 d-flex flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol md={8}>\n            <CCardGroup>\n              <CCard className=\"p-4\">\n                <CCardBody>\n                  <CForm>\n                    <h1>ورود</h1>\n                    <p className=\"text-medium-emphasis\">\n                      به حساب کاربری خود وارد شوید\n                    </p>\n                    <CInputGroup className=\"mb-3\">\n                      <CInputGroupText>@</CInputGroupText>\n                      <CFormInput\n                        placeholder=\"حساب کاربری\"\n                        autoComplete=\"email\"\n                        name=\"email\"\n                        value={loginData.email}\n                        onChange={handleChange}\n                      />\n                    </CInputGroup>\n                    <CInputGroup className=\"mb-4\">\n                      <CInputGroupText>\n                        <CIcon icon={cilLockLocked} />\n                      </CInputGroupText>\n                      <CFormInput\n                        type=\"password\"\n                        placeholder=\"رمز عبور\"\n                        autoComplete=\"current-password\"\n                        name=\"password\"\n                        value={loginData.password}\n                        onChange={handleChange}\n                      />\n                    </CInputGroup>\n                    <CRow>\n                      <CCol xs={6}>\n                        <CButton\n                          color=\"primary\"\n                          className=\"px-4\"\n                          onClick={handleSumbit}\n                        >\n                          ورود\n                        </CButton>\n                      </CCol>\n                      {/* <CCol xs={6} className=\"text-right\">\n                        <CButton color=\"link\" className=\"px-0\">\n                          Forgot password?\n                        </CButton>\n                      </CCol> */}\n                    </CRow>\n                  </CForm>\n                </CCardBody>\n                {error && <CAlert color=\"danger\">{error}</CAlert>}\n              </CCard>\n              <CCard\n                className=\"text-white bg-primary py-5\"\n                style={{ width: \"44%\" }}\n              >\n                <CCardBody className=\"text-center\">\n                  <div>\n                    <h2>ثبت نام</h2>\n                    <p>\n                      اگر حساب کاربری ندارید بروی لینک زیر کلیک کنید و حساب\n                      کاربری خود را ایجاد کنید\n                    </p>\n                    <Link to=\"/register\">\n                      <CButton\n                        color=\"primary\"\n                        className=\"mt-3\"\n                        active\n                        tabIndex={-1}\n                      >\n                        عضویت\n                      </CButton>\n                    </Link>\n                  </div>\n                </CCardBody>\n              </CCard>\n            </CCardGroup>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}
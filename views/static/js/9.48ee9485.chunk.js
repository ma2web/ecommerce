(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[9],{530:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var a="http://45.92.95.60:7070",o={"x-auth-token":localStorage.token,"Content-Type":"application/json"}},636:function(e,t){},708:function(e,t,n){"use strict";n.r(t);var a=n(533),o=n.n(a),c=n(534),r=n(154),l=n(54),i=n(525),s=n(700),u=n(529),d=n(526),j=n(532),p=n.n(j),h=n(626),b=n.n(h),v=n(1),m=n(24),x=n(530),O=n(22);t.default=function(){var e=Object(v.useState)({email:"",password:""}),t=Object(i.a)(e,2),n=t[0],a=t[1],j=Object(v.useState)(null),h=Object(i.a)(j,2),f=h[0],g=h[1],w=(Object(m.useHistory)().push,function(e){return a(Object(l.a)(Object(l.a)({},n),{},Object(r.a)({},e.target.name,e.target.value)))}),k=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,c,r,l,i,s,u,d,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("".concat(x.a,"/api/user/login"),n);case 4:200===(null===(a=e.sent)||void 0===a?void 0:a.status)&&(i=null===a||void 0===a||null===(c=a.data)||void 0===c?void 0:c.token,s=null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r._id,u=null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.role,localStorage.token=i,localStorage.userId=s,localStorage.role=u,setTimeout((function(){window.location.href="/"}),1e3)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),g(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d||null===(j=d.data)||void 0===j?void 0:j.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.useEffect)((function(){var e=b.a.parse(b.a.parse(window.location,{ignoreQueryPrefix:!0}).origin+b.a.parse(window.location,{ignoreQueryPrefix:!0}).hash.replace("#",""),{ignoreQueryPrefix:!0});(null===e||void 0===e?void 0:e["http://45.92.95.60:7070/login?token"])&&(localStorage.token=null===e||void 0===e?void 0:e["http://45.92.95.60:7070/login?token"],localStorage.userId=null===e||void 0===e?void 0:e.userId,localStorage.role=null===e||void 0===e?void 0:e.role,setTimeout((function(){window.location.href="/"}),500))}),[]),Object(O.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:Object(O.jsx)(d.m,{children:Object(O.jsx)(d.U,{className:"justify-content-center",children:Object(O.jsx)(d.l,{md:6,children:Object(O.jsx)(d.j,{children:Object(O.jsxs)(d.h,{className:"p-4",children:[Object(O.jsx)(d.i,{children:Object(O.jsxs)(d.u,{children:[Object(O.jsx)("h1",{children:"\u0648\u0631\u0648\u062f"}),Object(O.jsx)("p",{className:"text-medium-emphasis",children:"\u0628\u0647 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f"}),Object(O.jsxs)(d.G,{className:"mb-3",children:[Object(O.jsx)(d.H,{children:"@"}),Object(O.jsx)(d.w,{placeholder:"\u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc",autoComplete:"email",name:"email",value:n.email,onChange:w})]}),Object(O.jsxs)(d.G,{className:"mb-4",children:[Object(O.jsx)(d.H,{children:Object(O.jsx)(u.a,{icon:s.a})}),Object(O.jsx)(d.w,{type:"password",placeholder:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631",autoComplete:"current-password",name:"password",value:n.password,onChange:w})]}),Object(O.jsx)(d.U,{children:Object(O.jsx)(d.l,{xs:6,children:Object(O.jsx)(d.f,{color:"primary",className:"px-4",onClick:k,children:"\u0648\u0631\u0648\u062f"})})})]})}),f&&Object(O.jsx)(d.a,{color:"danger",children:f})]})})})})})})}}}]);
//# sourceMappingURL=9.48ee9485.chunk.js.map
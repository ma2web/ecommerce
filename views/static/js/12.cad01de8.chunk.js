(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[12],{695:function(e,t,c){"use strict";c.r(t);var n=c(533),a=c.n(n),i=c(534),r=c(525),l=c(696),s=c(668),o=c(529),d=c(526),u=c(532),j=c.n(u),b=c(623),v=c.n(b),h=c(1),m=c(530),x=c(584),O=c(22),p=Object(h.lazy)((function(){return c.e(14).then(c.bind(null,627))}));t.default=function(){var e=Object(h.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],u=Object(h.useState)(0),b=Object(r.a)(u,2),g=b[0],f=b[1],N=Object(h.useState)(0),y=Object(r.a)(N,2),k=y[0],_=y[1],w=localStorage.userId,Y=localStorage.role;return Object(h.useEffect)(Object(i.a)(a.a.mark((function e(){var t,c,i,r,l,s,o,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(m.a,"/api/users"));case 2:return i=e.sent,e.next=5,j.a.get("".concat(m.a,"/api/stores"));case 5:if(r=e.sent,"admin"!==Y){e.next=13;break}return e.next=9,j.a.get("".concat(m.a,"/api/products/").concat(w));case 9:s=e.sent,_(null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.length),e.next=17;break;case 13:return e.next=15,j.a.get("".concat(m.a,"/api/products"));case 15:d=e.sent,_(null===d||void 0===d||null===(o=d.data)||void 0===o?void 0:o.length);case 17:n(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.map((function(e){return{avatar:{src:"".concat(m.a,"/uploads/customer/").concat(null===e||void 0===e?void 0:e._id,"/").concat(null===e||void 0===e?void 0:e.avatar),avatar:null===e||void 0===e?void 0:e.avatar},user:{name:(null===e||void 0===e?void 0:e.firstName)+" "+(null===e||void 0===e?void 0:e.lastName),new:!1,registered:v()(null===e||void 0===e?void 0:e.createdAt).format("jYYYY/jM/jD")},country:{phoneNumber:null===e||void 0===e?void 0:e.phoneNumber,countryCode:null===e||void 0===e?void 0:e.countryCode,email:null===e||void 0===e?void 0:e.email},activity:v()(null===e||void 0===e?void 0:e.updatedAt).format("jYYYY/jM/jD"),_id:null===e||void 0===e?void 0:e._id}}))),f(null===r||void 0===r||null===(c=r.data)||void 0===c?void 0:c.length);case 19:case"end":return e.stop()}}),e)}))),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p,{users:c,stores:g,products:k}),"super_admin"===localStorage.role?Object(O.jsx)(d.U,{children:Object(O.jsx)(d.l,{xs:!0,children:Object(O.jsxs)(d.h,{className:"mb-4",children:[Object(O.jsx)(d.k,{children:"\u0644\u06cc\u0633\u062a \u06a9\u0627\u0631\u0628\u0631\u0627\u0646"}),Object(O.jsx)(d.i,{children:Object(O.jsxs)(d.cb,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[Object(O.jsx)(d.fb,{color:"light",children:Object(O.jsxs)(d.hb,{children:[Object(O.jsx)(d.gb,{className:"text-center",children:Object(O.jsx)(o.a,{icon:l.a})}),Object(O.jsx)(d.gb,{children:"\u06a9\u0627\u0631\u0628\u0631"}),Object(O.jsx)(d.gb,{children:"\u0627\u06cc\u0645\u06cc\u0644"}),Object(O.jsx)(d.gb,{children:"\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647"}),Object(O.jsx)(d.gb,{children:"\u0641\u0639\u0627\u0644\u06cc\u062a"}),"super_admin"===Y&&Object(O.jsx)(d.gb,{children:"\u062d\u0630\u0641"})]})}),Object(O.jsx)(d.db,{children:c.map((function(e,t){var a,i,r,l;return Object(O.jsxs)(d.hb,{"v-for":"item in tableItems",children:[Object(O.jsx)(d.eb,{className:"text-center",children:(null===e||void 0===e||null===(a=e.avatar)||void 0===a?void 0:a.avatar)&&Object(O.jsx)(d.b,{size:"md",src:e.avatar.src,status:e.avatar.status})}),Object(O.jsxs)(d.eb,{children:[Object(O.jsx)("div",{children:e.user.name}),Object(O.jsxs)("div",{className:"small text-medium-emphasis",children:[Object(O.jsx)("span",{children:e.user.new?"\u06a9\u0627\u0631\u0628\u0631 \u062c\u062f\u06cc\u062f":""})," | \u062a\u0627\u0631\u06cc\u062e \u0639\u0636\u0648\u06cc\u062a: ",e.user.registered]})]}),Object(O.jsx)(d.eb,{children:null===e||void 0===e||null===(i=e.country)||void 0===i?void 0:i.email}),Object(O.jsx)(d.eb,{children:"".concat(null===e||void 0===e||null===(r=e.country)||void 0===r?void 0:r.phoneNumber," ").concat(null===e||void 0===e||null===(l=e.country)||void 0===l?void 0:l.countryCode,"+")}),Object(O.jsxs)(d.eb,{children:[Object(O.jsx)("div",{className:"small text-medium-emphasis",children:"\u0622\u062e\u0631\u06cc\u0646 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc"}),Object(O.jsx)("strong",{children:e.activity})]}),"super_admin"===Y&&Object(O.jsx)(d.eb,{children:Object(O.jsx)(o.a,{icon:s.a,className:"text-danger",size:"lg",onClick:function(){console.log(e),window.confirm("\u0622\u06cc\u0627 \u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062a\u06cc\u062f\u061f")&&j.a.delete("".concat(m.a,"/api/user/").concat(e._id),{headers:{"x-auth-token":localStorage.token}}).then((function(t){n(c.filter((function(t){return t._id!==e._id})))})).catch((function(e){console.log(e)}))}})})]},t)}))})]})})]})})}):Object(O.jsx)(x.a,{})]})}}}]);
//# sourceMappingURL=12.cad01de8.chunk.js.map